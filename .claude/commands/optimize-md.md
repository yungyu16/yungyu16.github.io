# Optimize Markdown

一个用于优化 Markdown 格式的斜杠命令，专门处理图片格式和标题序号。

## 功能描述

这个命令会对选中的markdown文件进行以下优化处理：

### 1. 图片前后换行

- 在每张图片前后自动添加空行，确保图片与周围内容有适当的间距

### 2. 图片宽度设置

- 将所有图片转换为 HTML `<img>` 标签格式
- 设置图片宽度为 800 像素
- 保持图片的原始高度比例（自动计算）

### 3. 标题序号重构

- 重新维护整个文档的标题层级序号
- 同一父标题下的同级别标题序号从 1 开始递增
- 支持多级标题的嵌套编号

### 4. 标题格式规范

- 使用 `#` 号 + 空格 + 序号的格式
- 序号放在 `#` 号和空格后面
- 例如：`# 1 一级标题`、`## 1.1 二级标题`、`### 1.1.1 三级标题`

## 参数说明

### 文件名（可选）

- **语法**: 直接提供文件名或文件路径，无需前缀
- **描述**: 指定要处理的 Markdown 文件名或部分名称
- **默认行为**: 如果不提供文件名，则处理当前活动文档或选中的内容
- **示例**:
    - `README.md`
    - `docs/api.md`
    - `tutorial` (如果只有一个文件名包含 "tutorial" 的文件)

## 输入输出

**输入：**

- 原始 Markdown 文本内容，或
- 通过文件名指定的 Markdown 文件

**输出：** 优化后的 Markdown 文本内容，包含：

- 格式化的图片标签
- 重新编号的标题结构
- 保持原有的文本内容和代码块

## 使用示例

### 示例 1：处理当前文档

```
/optimize-md
```

### 示例 2：处理指定文件

```
/optimize-md README.md
```

### 示例 3：处理包含特定名称的文件

```
/optimize-md tutorial
```

## 实现细节

### 图片处理逻辑

1. 查找所有 Markdown 图片语法 `![alt](url)`
2. 在图片前后添加空行
3. 转换为 HTML `<img>` 标签并设置宽度

### 标题编号逻辑

1. 识别所有标题（以 `#` 开头的行）
2. 根据标题层级维护编号状态
3. 为每个标题添加适当的编号前缀
4. 更新标题格式为 `# 编号 标题内容`

### 注意事项

- 保持原有代码块内容不变
- 保持原有文本内容不变
- 只修改图片格式和标题格式
- 处理嵌套标题的正确编号